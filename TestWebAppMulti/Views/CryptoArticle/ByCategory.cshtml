@using DevTestModel.Models;
@model IEnumerable<DataHistoryArticle>

<body>
    <h2>Latest Crypto News Articles</h2>
    <div class="container mt-5">
        <div class="card mt-4">
            <div class="row">
                <div class="card-body small">
                    <h5 class="card-title">Actions</h5>
                    <a asp-controller="Home" asp-action="Index" class="btn btn-primary btn-block">Back to Menu</a>
                </div>
            </div>
        </div>
    </div>
    <br />
    <div class="container mt-3">
        @foreach (var article in Model)
        {
            <div style="border: 1px solid #ccc; margin-bottom: 20px; padding: 10px;">
                <h3>@article.Title</h3>
                <p>@article.Body</p>

                @if (!string.IsNullOrEmpty(article.ImageUrl))
                {
                    <img src="@article.ImageUrl" alt="Image" style="max-width: 100%; height: auto;" />
                }
                else
                {
                    <p>No image available</p>
                }
            </div>
        }
        @*@foreach (var article in Model)
        {
            <div class="card mb-3">
                @if (!string.IsNullOrEmpty(article.ImageUrl))
                {
                    <img src="@article.ImageUrl" class="card-img-top" alt="Image from API req." />
                }
                <div class="card-body">
                    <h5 class="card-title">@article.Title</h5>
                    <p class="card-text">@article.Body</p>
                    <p class="card-text"><small class="text-muted">Published on: @article.DateAndTimeInserted.ToString()</small></p>
                </div>
            </div>
        }*@
    </div>

    <script src="~/js/ScriptENHR.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <div class="LAST">
        <div class="text-center">
            <a href="#top" id="back-to-top" class="btn btn-dark back-to-top">Back to Top</a>
            <br />
            <br />
            <a class="btn btn-primary" asp-area="" asp-controller="Home" asp-action="Index">BackToIndex</a>
        </div>
        <script>
            // Smooth scrolling for the "Back to Top" link
            $(document).ready(function () {
                $(window).scroll(function () {
                    if ($(this).scrollTop() > 100) {
                        $('#back-to-top').fadeIn();
                    } else {
                        $('#back-to-top').fadeOut();
                    }
                });

                $('#back-to-top').click(function () {
                    $('body,html').animate({
                        scrollTop: 0
                    }, 400);
                    return false;
                });
            });
        </script>
    </div>
    <script>
        $(document).ready(function () {
            $('#saveArticleButton').on('click', function (e) {
                e.preventDefault(); // Prevent the default behavior (following the link)

                // Construct the URL directly or use data-* attribute
                var url = '@Url.Action("SaveArticle", "CryptoArticle")';

                // Make an AJAX request to the SaveArticle action
                $.ajax({
                    url: url,
                    type: 'POST',
                    success: function (data) {
                        // Handle success if needed
                        console.log('Article saved successfully.');
                    },
                    error: function (error) {
                        // Handle error if needed
                        console.error('Error saving article:', error);
                    }
                });
            });
        }); // preventing redirection
    </script>
</body>



@*
working    

<div class="row">
    <div class="card-body small">
        <h5 class="card-title">Language</h5>
        <div class="selectlanguage">
            <form method="get" action="@Url.Action("ByCategory", "CryptoArticle")">
                <div>
                    <label for="categoryDropdown">Select Category:</label>
                    @Html.DropDownList("selectedCategory", (SelectList)ViewBag.Categories, "All Categories", new { id = "translations" })
                </div>
                <button type="submit">Filter</button>
            </form>
            <div id="translations">
                <h1 data-en="Hello" data-hr="Bok"></h1>
                <p data-en="Latest Crypto News Articles" data-hr="Crypto Vjesti Vec Danas, pare lete"></p>
            </div>
        </div>
    </div>
</div>*@