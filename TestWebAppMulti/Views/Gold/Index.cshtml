@model DevTestModel.Models.GoldPriceModel
@using DevTestModel.ExtensionMethods
@using DevTestModel.Models
@using System.Linq
<h1>Main View</h1>
@{
    Func<bool> isGreen = () => Model.Price > 0; // Replace 0 with your specific condition
}

<!-- Other content of your main view -->

<div class="pretty-card card mt-4">
    <h2 class="card-title">Gold Price Information LIVE:</h2>
    <div class="card-body">
        <p class="card-text">Timestamp: @Model.Timestamp</p>
        <p class="card-text">Metal: @Model.Metal</p>
        <p class="card-text">Currency: @Model.Currency</p>
        <p class="card-text">Ask: @Model.Ask</p>
        <p class="card-text">Bid: @Model.Bid</p>
        <p class="card-text">Price: @Model.Price</p>
        <p class="card-text">Price (22K): @Model.PriceGram22K</p>
        <p class="card-text">CH: @Model.CH</p>
        <p class="card-text">CHP: @Model.CHP</p>
    </div>
</div>

<br />
<form asp-controller="Gold" asp-action="SaveGoldPrice" method="post">
    <button id="addGoldPriceButton" type="submit" class="btn btn-outline-primary btn-block"><strong>AddGold</strong></button>
</form>
<br />
<a class="btn btn-success" asp-area="" asp-controller="Home" asp-action="Index">BackToIndex</a>
<br />
<br />
<a class="btn btn-success" asp-area="" asp-controller="Gold" asp-action="SmallGoldTable">SmallTable</a>
<br />
<script>
    $(document).ready(function () {
        $('#addGoldPriceButton').on('click', function () {
            // Make a GET request to your API to fetch dynamic data
            fetch('https://www.goldapi.io/api/:symbol/:currency/:date?')
                .then(response => response.json())
                .then(data => {
                    // Assuming the API response has the required data structure
                    var goldPriceData = {
                        Timestamp: new Date().getTime(),
                        Metal: data.metal,
                        Currency: data.currency,
                        Ask: data.ask,
                        Bid: data.bid,
                        Price: data.price,
                        PriceGram22K: data.priceGram22K,
                        CH: data.ch,
                        CHP: data.chp
                    };

                    .ajax({
                        url: '/Gold/SaveGoldPrice', // Adjust the endpoint based on your route
                        type: 'POST',
                        contentType: 'application/json',
                        data: JSON.stringify(goldPriceData),
                        success: function (response) {
                            console.log('GoldPrice added successfully:', response);
                        },
                        error: function (error) {
                            console.error('Failed to add GoldPrice:', error);
                        }
                    });
                })
                .catch(error => {
                    console.error('Error fetching dynamic data from API:', error);
                });
        });
    });
</script>

<style>
    .card {
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 15px;
        margin: 10px;
        width: 300px;
        float: left;
    }

    .clear {
        clear: both;
    }
</style>



@*
<div class="card">
    <h2>Gold Price Information</h2>
    <p>Timestamp: @Model.SingleItem.Timestamp</p>
    <p>Metal: @Model.SingleItem.Metal</p>
    <p>Currency: @Model.SingleItem.Currency</p>
    <p>Ask: @Model.SingleItem.Ask</p>
    <p>Bid: @Model.SingleItem.Bid</p>
    <p>Price: @Model.SingleItem.Price</p>
    <p>Price (22K): @Model.SingleItem.PriceGram22K</p>
    <p>CH: @Model.SingleItem.CH</p>
    <p>CHP: @Model.SingleItem.CHP</p>
</div>*@